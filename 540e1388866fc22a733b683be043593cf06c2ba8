{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a65f600d_c25d1ac2",
        "filename": "tools/js.bzl",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2021-04-24T09:01:38Z",
      "side": 1,
      "message": "Turns out the whole polygerrit_plugin is actually not really needed.\n\nAfter clean up in core, I eliminated its usage entirely in codemirror-editior: [1] and task: [2] plugins.\n\n[1] https://gerrit-review.googlesource.com/c/plugins/codemirror-editor/+/304192\n[2] https://gerrit-review.googlesource.com/c/plugins/task/+/302442",
      "revId": "540e1388866fc22a733b683be043593cf06c2ba8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2c94b06f_b6a3cbe7",
        "filename": "tools/js.bzl",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-04-29T17:38:20Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "a65f600d_c25d1ac2",
      "revId": "540e1388866fc22a733b683be043593cf06c2ba8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11efd646_f9e397c7",
        "filename": "tools/js.bzl",
        "patchSetId": 6
      },
      "lineNbr": 3,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-04-23T20:50:43Z",
      "side": 1,
      "message": "Why does this not match https://gerrit-review.googlesource.com/c/gerrit/+/304185/8/tools/bzl/js.bzl ? Just curious how this file/method should be maintained in the future.",
      "revId": "540e1388866fc22a733b683be043593cf06c2ba8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a2854ae3_1ebcf90d",
        "filename": "tools/js.bzl",
        "patchSetId": 6
      },
      "lineNbr": 3,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2021-04-23T21:36:57Z",
      "side": 1,
      "message": "It\u0027s just for task plugin right now and it doesn\u0027t use assets. In fact the only Polygerrit plugin that is using assets is codemirror-editor plugin. It\u0027s core gerrit plugin and we don\u0027t care about standalone build mode for core plugins.\n\nYou could use this query: [1] to find all caller sites of polygerrit_plugin.\n\nBesides that, if task plugin would decide to add assets, or another Polygerrit plugin would that use assets would like to support standalone build mode, we could always add it here...\n\n[1] https://cs.bazel.build/search?q\u003dr%3Agerrit+polygerrit_plugin",
      "parentUuid": "11efd646_f9e397c7",
      "revId": "540e1388866fc22a733b683be043593cf06c2ba8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e13d5ff6_337e7fdd",
        "filename": "tools/js.bzl",
        "patchSetId": 6
      },
      "lineNbr": 3,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2021-04-23T21:40:40Z",
      "side": 1,
      "message": "And in case you are wondering why I omitted here the plugin_name? It\u0027s not needed, and if you look at the caller sites, most of them duplicated name and plugin_name and it could (and should) be removed, like here: [1]:\n\n  polygerrit_plugin(\n    name \u003d \"rv-reviewers\",\n    app \u003d \"reviewers-bundle.js\",\n    plugin_name \u003d \"rv-reviewers\",\n  )\n\n[1] https://gerrit.googlesource.com/plugins/reviewers/+/refs/heads/master/BUILD#40",
      "parentUuid": "a2854ae3_1ebcf90d",
      "revId": "540e1388866fc22a733b683be043593cf06c2ba8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "21e3e2e8_a159e260",
        "filename": "tools/js.bzl",
        "patchSetId": 6
      },
      "lineNbr": 3,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2021-04-23T21:45:02Z",
      "side": 1,
      "message": "Fixed in: change 304189.",
      "parentUuid": "e13d5ff6_337e7fdd",
      "revId": "540e1388866fc22a733b683be043593cf06c2ba8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f9dc033_dfd711b1",
        "filename": "tools/js.bzl",
        "patchSetId": 6
      },
      "lineNbr": 3,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-04-29T17:38:20Z",
      "side": 1,
      "message": "I\u0027m glad this can be simple, but I want to make sure I understand how this relates to the in-tree support for UI plugins. Also, I know the task plugin does need assets in the future because our GWT-based not-yet-upstreamed UI has them, but we haven\u0027t ported all of it to PG yet.\n\nI see you added gerrit_js_bundle to core in [1]. Is your plan to switch pg plugins away from using the improved polygerrit_plugin rule from [2] and to use gerrit_js_bundle instead? If there are different situations where each should be used, should we update bazlets/README.md and/or core\u0027s dev-plugins doc?\n\nSorry I\u0027m asking so many questions. I want to be able to help maintain bazlets/bazel/plugins better and right now I don\u0027t understand enough to do that.\n\n[1] https://gerrit-review.googlesource.com/c/gerrit/+/304225\n[2] https://gerrit-review.googlesource.com/c/gerrit/+/304185",
      "parentUuid": "21e3e2e8_a159e260",
      "revId": "540e1388866fc22a733b683be043593cf06c2ba8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3f15dd9c_94984ff4",
        "filename": "tools/js.bzl",
        "patchSetId": 6
      },
      "lineNbr": 3,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2021-04-29T19:10:12Z",
      "side": 1,
      "message": "\u003e I\u0027m glad this can be simple, but I want to make sure I understand how this relates to the in-tree support for UI plugins. \n\nNo problem. I am happy to help. We could set up a call, or have a Bazel build related session during upcoming virtual hackathon.\n\n\u003e Is your plan to switch pg plugins away from using the improved polygerrit_plugin rule from [2] and to use gerrit_js_bundle instead?\n\nYes, in fact it was done recently for checks, reviewers and serviceuser plugins.\n\n\u003e If there are different situations where each should be used, should we update bazlets/README.md and/or core\u0027s dev-plugins doc?\n\n+1. There are still pure JavaScript plugins, that still use polygerrit_plugin. While gerrit_js_bundle produces resource JAR with static/foo.js directory layout.",
      "parentUuid": "4f9dc033_dfd711b1",
      "revId": "540e1388866fc22a733b683be043593cf06c2ba8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "77fceaef_8aa27e43",
        "filename": "tools/js.bzl",
        "patchSetId": 6
      },
      "lineNbr": 3,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-04-29T19:24:32Z",
      "side": 1,
      "message": "\u003e \u003e I\u0027m glad this can be simple, but I want to make sure I understand how this relates to the in-tree support for UI plugins. \n\u003e \n\u003e No problem. I am happy to help. We could set up a call, or have a Bazel build related session during upcoming virtual hackathon.\n\nI would totally attend a Bazel session! If we don\u0027t do it this time, we should try to chat more soon.",
      "parentUuid": "3f15dd9c_94984ff4",
      "revId": "540e1388866fc22a733b683be043593cf06c2ba8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}